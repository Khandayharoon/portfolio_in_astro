import{j as R}from"./jsx-runtime.CRkqtJS5.js";import{r as T}from"./index.B52nOzfP.js";function X(u){const l=T.useRef(null);return T.useEffect(()=>{const{cleanUp:y,renderTrailCursor:p}=k({ref:l,color:u.color});return p(),()=>{y()}},[u.color]),R.jsx("canvas",{ref:l,className:"pointer-events-none fixed inset-0 z-10 h-full w-full hidden opacity-0 md:block md:opacity-100 ",style:u.style})}function k(u){const l=getComputedStyle(document.documentElement).getPropertyValue("--accent"),y=`hsla(${l?l.split(" ").join(","):"0, 0%, 0%"}, 0.35)`,{ref:p,color:b}=u,o=p.current?.getContext("2d"),c={friction:.5,trails:20,size:40,dampening:.2,tension:.98},a={x:0,y:0};let h=!0;class z{x;y;vy;vx;constructor(){this.x=0,this.y=0,this.vy=0,this.vx=0}}class P{spring;friction;nodes;constructor(t){this.spring=t.spring+.1*Math.random()-.05,this.friction=c.friction+.01*Math.random()-.005;const e=t.cursorPosition??{x:0,y:0};this.nodes=[];for(let i=0;i<c.size;i++){const s=new z;s.x=e.x,s.y=e.y,this.nodes.push(s)}}update(){let t=this.spring,e=this.nodes[0];e.vx+=(a.x-e.x)*t,e.vy+=(a.y-e.y)*t;for(let i=0,s=this.nodes.length;i<s;i++){if(e=this.nodes[i],i>0){const r=this.nodes[i-1];e.vx+=(r.x-e.x)*t,e.vy+=(r.y-e.y)*t,e.vx+=r.vx*c.dampening,e.vy+=r.vy*c.dampening}e.vx*=this.friction,e.vy*=this.friction,e.x+=e.vx,e.y+=e.vy,t*=c.tension}}draw(){let t,e,i=this.nodes[0].x,s=this.nodes[0].y;o.beginPath(),o.moveTo(i,s);for(let r=1,j=this.nodes.length-2;r<j;r++){const x=this.nodes[r],C=this.nodes[r+1];i=.5*(x.x+C.x),s=.5*(x.y+C.y),o.quadraticCurveTo(x.x,x.y,i,s)}t=this.nodes[this.nodes.length-2],e=this.nodes[this.nodes.length-1],o.quadraticCurveTo(t.x,t.y,e.x,e.y),o.stroke(),o.closePath()}}function w(){if(h){o.globalCompositeOperation="source-over",o.clearRect(0,0,o.canvas.width,o.canvas.height),o.globalCompositeOperation="lighter",o.strokeStyle=b||y,o.lineWidth=1;for(let n,t=0;t<c.trails;t++)m[t]!==void 0&&(n=m[t],n.update(),n.draw());window.requestAnimationFrame(w)}}let m=[];function g(n){n instanceof MouseEvent?(a.x=n.clientX,a.y=n.clientY):(a.x=n.touches[0].pageX,a.y=n.touches[0].pageY),n.preventDefault()}function f(n){n.touches.length===1&&(a.x=n.touches[0].pageX,a.y=n.touches[0].pageY)}function d(n){function t(){m=[];for(let e=0;e<c.trails;e++)m.push(new P({spring:.45+e/c.trails*.025}))}document.removeEventListener("mousemove",d),document.removeEventListener("touchstart",d),document.addEventListener("mousemove",g),document.addEventListener("touchmove",f),document.addEventListener("touchstart",f),g(n),t(),w()}function v(){o.canvas.width=window.innerWidth-20,o.canvas.height=window.innerHeight}function E(){h=!1}function L(){h||(h=!0,w())}function A(){document.addEventListener("mousemove",d),document.addEventListener("touchstart",d),window.addEventListener("orientationchange",v),window.addEventListener("resize",v),window.addEventListener("focus",L),window.addEventListener("blur",E),v()}function M(){document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",f),document.removeEventListener("touchstart",f),document.removeEventListener("mousemove",d),document.removeEventListener("touchstart",d),window.removeEventListener("orientationchange",v),window.removeEventListener("resize",v),window.removeEventListener("focus",L),window.removeEventListener("blur",E)}return{cleanUp:M,renderTrailCursor:A,stopAnimation:E,startAnimation:L}}export{X as default};
